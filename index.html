<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´ªåƒè›‡ - ç»ˆç«¯ç‰ˆ</title>
</head>
<body>
    <pre>
import curses
import random
import time
from curses import KEY_RIGHT, KEY_LEFT, KEY_UP, KEY_DOWN

def main(stdscr):
    # åˆå§‹åŒ– curses
    curses.curs_set(0)
    stdscr.nodelay(1)
    stdscr.timeout(150)
    sh, sw = stdscr.getmaxyx()
    w = curses.newwin(sh, sw, 0, 0)
    w.keypad(1)
    w.border(0)
    w.nodelay(1)
    w.timeout(150)

    # åˆå§‹åŒ–è›‡å’Œé£Ÿç‰©
    snake = [(sh//2, sw//2), (sh//2, sw//2-1), (sh//2, sw//2-2)]
    food = (sh//4, sw//4)
    w.addch(food[0], food[1], 'ğŸ')

    # åˆå§‹æ–¹å‘
    key = KEY_RIGHT
    score = 0

    while True:
        w.border(0)
        w.addstr(0, 2, f"åˆ†æ•°: {score} ")
        w.addstr(0, sw//2 - 4, "è´ªåƒè›‡")
        
        # å¤„ç†æŒ‰é”®
        next_key = w.getch()
        key = key if next_key == -1 else next_key

        # è®¡ç®—æ–°å¤´éƒ¨ä½ç½®
        head = snake[0]
        if key == KEY_UP:
            new_head = (head[0]-1, head[1])
        if key == KEY_DOWN:
            new_head = (head[0]+1, head[1])
        if key == KEY_LEFT:
            new_head = (head[0], head[1]-1)
        if key == KEY_RIGHT:
            new_head = (head[0], head[1]+1)

        # æ’å…¥æ–°å¤´éƒ¨
        snake.insert(0, new_head)

        # æ£€æŸ¥ç¢°æ’
        if (snake[0][0] == 0 or snake[0][0] == sh-1 or 
            snake[0][1] == 0 or snake[0][1] == sw-1 or 
            snake[0] in snake[1:]):
            w.addstr(sh//2, sw//2 - 5, 'æ¸¸æˆç»“æŸ!')
            w.addstr(sh//2 + 1, sw//2 - 10, f'æœ€ç»ˆåˆ†æ•°: {score}')
            w.addstr(sh//2 + 2, sw//2 - 12, 'æŒ‰ä»»æ„é”®é€€å‡º...')
            w.refresh()
            time.sleep(2)
            break

        # æ£€æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
        if snake[0] == food:
            score += 10
            # åŠ é€Ÿ
            w.timeout(max(50, 150 - (score // 10) * 5))
            # ç”Ÿæˆæ–°é£Ÿç‰©
            while True:
                food = (random.randint(1, sh-2), random.randint(1, sw-2))
                if food not in snake:
                    break
            w.addch(food[0], food[1], 'ğŸ')
        else:
            # ç§»é™¤å°¾éƒ¨
            tail = snake.pop()
            w.addch(tail[0], tail[1], ' ')

        # ç»˜åˆ¶è›‡å¤´å’Œèº«ä½“
        w.addch(snake[0][0], snake[0][1], 'â– ')
        for segment in snake[1:]:
            w.addch(segment[0], segment[1], 'â–¡')

if __name__ == "__main__":
    curses.wrapper(main)
    </pre>
</body>
</html>
    